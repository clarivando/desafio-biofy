<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contratos - Contract Analyzer</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">
  <!-- AdminLTE -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="assets/css/custom.css">
</head>
<body class="hold-transition sidebar-mini">

<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#">
          <i class="fas fa-bars"></i>
        </a>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a href="#" class="nav-link" onclick="logout()">  Sair <i class="fas fa-sign-out-alt"></i></a>
      </li>
    </ul>
  </nav>

  <!-- Sidebar -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="#" class="brand-link">
      <i class="fas fa-file-contract brand-image img-circle elevation-3" style="opacity: .8"></i>
      <span class="brand-text font-weight-light">Contract Analyzer</span>
    </a>
    <div class="sidebar">
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" role="menu">
          <li class="nav-item">
            <a href="contracts.html" class="nav-link active">
              <i class="nav-icon fas fa-file-alt"></i>
              <p>Contratos</p>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </aside>

  <!-- Content Wrapper -->
  <div class="content-wrapper">
    <div class="content-header">
      <div class="container-fluid d-flex justify-content-between align-items-center">
        <h1 class="m-0 text-dark">Contratos</h1>
        <button class="btn btn-primary" data-toggle="modal" data-target="#contractModal" onclick="openCreateModal()">
          <i class="fas fa-plus"></i> Novo Contrato
        </button>
      </div>
    </div>


    <!-- Main content -->
    <div class="content">
      <div class="container-fluid">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Lista de Contratos</h3>
          </div>
          <div class="card-body table-responsive p-0">
            <table class="table table-hover text-nowrap">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Arquivo</th>
                  <th>Nomes das Partes</th>
                  <th>Valores Monetários</th>
                  <th>Obrigações Principais</th>
                  <th>Dados Adicionais</th>
                  <th>Cláusulas de Rescisão</th>
                  <th class="actions">Ações</th>
                </tr>
              </thead>
              <tbody id="contractsTable">
                <!-- Dados carregados via JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal for Create/Edit -->
  <div class="modal fade" id="contractModal" tabindex="-1" role="dialog" aria-labelledby="contractModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <form id="contractForm" enctype="multipart/form-data">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="contractModalLabel">Novo Contrato</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="contractId">
            <div class="form-group" id="fileUploadGroup">
              <label for="filename">Arquivo do Contrato</label>
              <input
                type="file"
                class="form-control"
                id="filename"
                onchange="uploadAndExtract()"
                required
              >
            </div>

            <!-- Campo somente leitura para exibir o nome do arquivo na edição -->
            <div class="form-group">
              <label for="filenameDisplay">Arquivo do Contrato</label>
              <input
                type="text"
                class="form-control"
                id="filenameDisplay"
                readonly
                placeholder="Nenhum arquivo selecionado"
                style="display: none;"
              >
            </div>
            <div class="form-group">
              <label for="nomesPartes">Nomes das Partes</label>
              <input type="text" class="form-control" id="nomesPartes" placeholder="Separar por ponto e vírgula">
            </div>
            <div class="form-group">
              <label for="valoresMonetarios">Valores Monetários</label>
              <input type="text" class="form-control" id="valoresMonetarios" placeholder="Separar por ponto e vírgula">
            </div>
            <div class="form-group">
              <label for="obrigacoesPrincipais">Obrigações Principais</label>
              <textarea class="form-control" id="obrigacoesPrincipais" rows="2"></textarea>
            </div>
            <div class="form-group">
              <label for="dadosAdicionais">Dados Adicionais</label>
              <textarea class="form-control" id="dadosAdicionais" rows="2"></textarea>
            </div>
            <div class="form-group">
              <label for="clausulasRescisao">Cláusulas de Rescisão</label>
              <textarea class="form-control" id="clausulasRescisao" rows="2"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary" id="saveButton" disabled>Salvar</button>
          </div>
        </div>
      </form>
    </div>
  </div>


<!-- Modal de Detalhes do Contrato -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="detailsModalLabel">Detalhes do Contrato</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p><strong>ID:</strong> <span id="detailId"></span></p>
        <p><strong>Arquivo:</strong> <span id="detailFilename"></span></p>
        <p><strong>Nomes das Partes:</strong> <span id="detailNomesPartes"></span></p>
        <p><strong>Valores Monetários:</strong> <span id="detailValoresMonetarios"></span></p>
        <p><strong>Obrigações Principais:</strong></p>
        <p id="detailObrigacoesPrincipais" class="border p-2"></p>
        <p><strong>Dados Adicionais:</strong></p>
        <p id="detailDadosAdicionais" class="border p-2"></p>
        <p><strong>Cláusulas de Rescisão:</strong></p>
        <p id="detailClausulasRescisao" class="border p-2"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>




  <footer class="main-footer">
    <strong>&copy; 2025 Contract Analyzer</strong>
  </footer>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
<script src="assets/js/contracts.js"></script>
</body>
</html>
